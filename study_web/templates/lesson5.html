<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code 系列课程 - 第五节：CBT情绪日记游戏项目详解</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        .highlight-box {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
        }
        .cbt-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        .step-card {
            background: #f9fafb;
            padding: 1.5rem;
            border-radius: 0.75rem;
            border: 2px solid #e5e7eb;
            transition: border-color 0.3s;
        }
        .step-card:hover {
            border-color: #667eea;
        }
        .step-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            line-height: 2rem;
            text-align: center;
            margin-bottom: 1rem;
            font-weight: bold;
        }
        .emotion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .emotion-item {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            border: 1px solid #f59e0b;
        }
        .discussion-box {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 2px solid #3b82f6;
            padding: 2rem;
            border-radius: 1rem;
            margin: 2rem 0;
        }
        .discussion-box h3 {
            color: #1e40af;
            margin-bottom: 1rem;
        }
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        .tech-badge {
            background: #f3f4f6;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.9rem;
            border: 1px solid #d1d5db;
        }
        .code-example {
            background: #1f2937;
            color: #f9fafb;
            padding: 1.5rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            overflow-x: auto;
        }
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
        }
        .nav-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s;
        }
        .nav-btn:hover {
            transform: scale(1.05);
            text-decoration: none;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        {% from '_nav_macros.html' import course_sidebar %}
        {{ course_sidebar(courses, current_lesson) }}

        <!-- 主内容区 -->
        <main class="main-content">
            <header class="page-header">
                <a href="/" class="back-link">← 返回课程列表</a>
                <h1>第五节：CBT情绪日记游戏项目详解</h1>
            </header>

            <!-- 项目概述 -->
            <section id="project-overview" class="content-section">
                <h2>🎯 项目概述</h2>
                <p>CBT情绪日记游戏是一个融合<strong>认知行为疗法(CBT)</strong>理论与<strong>游戏化交互</strong>的创新Web应用。我们致力于通过<strong>"情绪记录 → 游戏化反馈 → 认知调整"</strong>的闭环系统，帮助用户在轻松游戏的过程中学习和实践CBT技巧。</p>

                <div class="highlight-box">
                    <strong>核心理念：</strong>影响我们情绪的不是事件本身，而是我们对事件的解读和认知。
                </div>

                <h3>项目愿景</h3>
                <ul>
                    <li>🎯 <strong>识别情绪模式</strong> - 了解自己的情绪变化规律</li>
                    <li>🧠 <strong>学习认知技巧</strong> - 掌握CBT思维重构方法</li>
                    <li>🎮 <strong>游戏化练习</strong> - 在游戏中培养积极思维习惯</li>
                    <li>📈 <strong>持续改善</strong> - 追踪情绪管理进步轨迹</li>
                </ul>
            </section>

            <!-- CBT理论基础 -->
            <section id="cbt-theory" class="content-section">
                <h2>🧠 认知行为疗法(CBT)理论基础</h2>

                <h3>什么是CBT？</h3>
                <p>认知行为疗法(Cognitive Behavioral Therapy)是由Aaron T. Beck博士创立的一种科学的心理治疗方法。它基于一个核心原理：<strong>我们的思维影响情绪，情绪影响行为，而行为又会反过来影响思维</strong>。</p>

                <h3>认知三角模型</h3>
                <div class="highlight-box">
                    <p><strong>认知 → 情绪 → 行为</strong></p>
                    <p>通过改变认知，我们可以改变情绪和行为反应。</p>
                </div>

                <h3>CBT四步法详解</h3>
                <div class="cbt-steps">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <h4>情绪识别</h4>
                        <p>识别和命名当前的情绪状态，了解情绪的强度和触发因素。</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <h4>自动思维识别</h4>
                        <p>发现影响情绪的自动化思维模式，识别非理性思维。</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <h4>证据评估</h4>
                        <p>客观分析支持或反驳该思维的真实证据。</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <h4>替代思维</h4>
                        <p>创造更平衡、现实的替代想法和认知方式。</p>
                    </div>
                </div>
            </section>

            <!-- CBT应用实践 -->
            <section id="cbt-application" class="content-section">
                <h2>🎮 项目中的CBT应用</h2>

                <h3>情绪识别与量化</h3>
                <p>在我们的项目中，我们从用户日记中提取以下情绪维度：</p>

                <div class="emotion-grid">
                    <div class="emotion-item">
                        <strong>😊 喜悦类</strong><br>
                        开心、满足、自豪
                    </div>
                    <div class="emotion-item">
                        <strong>😢 悲伤类</strong><br>
                        伤心、失落、沮丧
                    </div>
                    <div class="emotion-item">
                        <strong>😠 愤怒类</strong><br>
                        生气、烦躁、不满
                    </div>
                    <div class="emotion-item">
                        <strong>😨 恐惧类</strong><br>
                        害怕、焦虑、紧张
                    </div>
                    <div class="emotion-item">
                        <strong>😲 惊讶类</strong><br>
                        惊讶、震惊、困惑
                    </div>
                    <div class="emotion-item">
                        <strong>😒 厌恶类</strong><br>
                        厌恶、反感、羞耻
                    </div>
                </div>

                <h3>情绪强度评分系统</h3>
                <div class="code-example">
情绪强度评分 (1-5级)：
强度1: 轻微  - 能注意到但不影响生活
强度2: 轻度   - 偶尔影响注意力
强度3: 中度   - 明显影响日常活动
强度4: 较强   - 严重影响功能
强度5: 极强   - 无法正常学习工作

情绪效价评分 (-5 到 +5)：
+5: 极度喜悦    0: 中性平静    -5: 极度负面
                </div>

                <h3>认知偏差检测</h3>
                <p>项目能够识别常见的非理性思维模式：</p>
                <ul>
                    <li><strong>灾难化思维</strong>：把事情想得过分糟糕</li>
                    <li><strong>非黑即白思维</strong>：认为事情只有完全好或完全坏</li>
                    <li><strong>过度概括</strong>：基于单一事件做出广泛结论</li>
                    <li><strong>读心术</strong>：认为自己知道他人的想法</li>
                    <li><strong>预测未来</strong>：对未来做出负面预测</li>
                </ul>
            </section>

            <!-- 技术架构 -->
            <section id="tech-architecture" class="content-section">
                <h2>🛠 技术实现架构</h2>

                <h3>核心功能模块</h3>
                <div class="tech-stack">
                    <div class="tech-badge">Flask Web框架</div>
                    <div class="tech-badge">MySQL数据库</div>
                    <div class="tech-badge">JWT认证</div>
                    <div class="tech-badge">COZE API</div>
                    <div class="tech-badge">QWEN模型</div>
                    <div class="tech-badge">HTML5 Canvas</div>
                    <div class="tech-badge">Bootstrap 5</div>
                    <div class="tech-badge">响应式设计</div>
                </div>

                <h3>数据流转过程</h3>
                <div class="highlight-box">
                    <ol>
                        <li><strong>用户输入</strong>：用户在日记中记录情绪和想法</li>
                        <li><strong>AI分析</strong>：COZE/QWEN模型分析文本，提取情绪要素</li>
                        <li><strong>数据映射</strong>：将情绪数据转换为游戏参数</li>
                        <li><strong>游戏反馈</strong>：根据情绪状态调整游戏难度和内容</li>
                        <li><strong>认知练习</strong>：通过游戏化任务练习CBT技巧</li>
                        <li><strong>效果评估</strong>：追踪情绪变化和认知改善</li>
                    </ol>
                </div>
            </section>

            <!-- 游戏化设计 -->
            <section id="game-design" class="content-section">
                <h2>🎯 游戏化设计理念</h2>

                <h3>为什么要游戏化？</h3>
                <ul>
                    <li><strong>降低门槛</strong>：让心理治疗变得更加有趣和易接受</li>
                    <li><strong>增强动机</strong>：游戏成就和奖励系统提升参与度</li>
                    <li><strong>持续练习</strong>：通过游戏机制建立长期练习习惯</li>
                    <li><strong>即时反馈</strong>：游戏提供即时的积极反馈和鼓励</li>
                </ul>

                <h3>游戏设计原则</h3>
                <div class="cbt-steps">
                    <div class="step-card">
                        <h4>个性化体验</h4>
                        <p>基于用户情绪状态动态调整游戏内容和难度</p>
                    </div>
                    <div class="step-card">
                        <h4>渐进式学习</h4>
                        <p>从简单到复杂，逐步教授CBT技巧</p>
                    </div>
                    <div class="step-card">
                        <h4>积极强化</h4>
                        <p>通过奖励和成就强化积极行为</p>
                    </div>
                    <div class="step-card">
                        <h4>社交支持</h4>
                        <p>可选的社交功能增强支持和动力</p>
                    </div>
                </div>
            </section>

            <!-- 小组讨论 -->
            <section id="discussion" class="content-section">
                <div class="discussion-box">
                    <h3>🗣️ 小组讨论：游戏实体内容设计</h3>
                    <p><strong>讨论主题：</strong>基于CBT理论和情绪分析结果，我们的游戏应该具备什么样的实体内容和玩法？</p>

                    <h4>思考要点：</h4>
                    <ol>
                        <li><strong>游戏角色设计</strong>：什么样的角色能最好地代表不同的情绪状态？</li>
                        <li><strong>游戏场景</strong>：如何设计能够反映情绪变化的游戏环境？</li>
                        <li><strong>互动机制</strong>：玩家如何与游戏互动来完成CBT练习？</li>
                        <li><strong>奖励系统</strong>：什么样的奖励最能激励用户持续练习？</li>
                        <li><strong>难度调整</strong>：如何根据用户的情绪状态动态调整游戏难度？</li>
                    </ol>

                    <h4>讨论引导：</h4>
                    <ul>
                        <li>考虑到不同的情绪类型，游戏应该有不同的挑战模式吗？</li>
                        <li>如何将CBT四步法转化为具体的游戏任务？</li>
                        <li>游戏应该如何平衡娱乐性和治疗性？</li>
                        <li>什么样的游戏机制最能帮助用户建立积极的思维习惯？</li>
                    </ul>

                    <p><strong>期望成果：</strong>每个小组需要提出一个具体的游戏设计方案，包括游戏名称、核心玩法、角色设定、场景设计和CBT练习整合方式。</p>
                </div>
            </section>

            <!-- 项目进展 -->
            <section id="project-progress" class="content-section">
                <h2>📊 项目进展与成果</h2>

                <h3>已完成的功能</h3>
                <ul>
                    <li>✅ 完整的用户认证系统（注册、登录、密码重置）</li>
                    <li>✅ 现代化的前端界面设计</li>
                    <li>✅ 数据库架构和API接口</li>
                    <li>✅ 响应式设计和用户体验优化</li>
                </ul>

                <h3>下一阶段开发计划</h3>
                <ul>
                    <li>📝 日记书写和管理功能</li>
                    <li>🎮 游戏页面和交互逻辑</li>
                    <li>🤖 AI情绪分析集成</li>
                    <li>🔗 情绪数据与游戏逻辑关联</li>
                </ul>
            </section>

            <!-- 导航按钮 -->
            <div class="nav-buttons">
                <a href="/lesson4" class="nav-btn">← 上一节</a>
                <a href="/lesson6" class="nav-btn">下一节：Claude Code实战 →</a>
            </div>

            <!-- 技术支持 -->
            <section class="support-section">
                <h3>需要帮助？</h3>
                <p>如果在学习过程中遇到问题，请联系技术支持。</p>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>