<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code 系列课程 - 第二节：基础使用</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        {% from '_nav_macros.html' import course_sidebar %}
        {{ course_sidebar(courses, current_lesson) }}

        <!-- 主内容区 -->
        <main class="main-content">
            <header class="page-header">
                <a href="/" class="back-link">← 返回课程列表</a>
                <h1>第二节：基础使用</h1>
            </header>

<!-- 第二节课：基础使用 -->
            <section id="claude-intro" class="content-section">
                <h2>Claude Code 介绍</h2>

                <div class="info-box highlight">
                    <h3>什么是 Claude Code？</h3>
                    <p>Claude Code 是 Anthropic 推出的下一代 AI 编程助手，它不仅仅是一个代码补全工具，而是一个<strong>能够自主执行复杂开发任务的 AI Agent</strong>。</p>
                </div>

                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🤖</div>
                        <h3>自主执行</h3>
                        <p>能够理解、规划、执行和验证代码变更，无需人工干预即可完成复杂任务</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">📂</div>
                        <h3>全项目理解</h3>
                        <p>自动检索项目文件，理解整个代码库的上下文和架构</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🔄</div>
                        <h3>迭代优化</h3>
                        <p>自动运行测试、调试、修复错误，直到代码成功运行</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🎯</div>
                        <h3>任务分解</h3>
                        <p>将复杂任务分解为多个子任务，通过 Sub-agents 协同完成</p>
                    </div>
                </div>

                <div class="comparison-box">
                    <h3>传统 AI 编程工具 vs Claude Code</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>特性</th>
                                <th>传统工具</th>
                                <th>Claude Code</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>工作方式</td>
                                <td>代码补全和建议</td>
                                <td>自主执行完整任务</td>
                            </tr>
                            <tr>
                                <td>上下文理解</td>
                                <td>当前文件或函数</td>
                                <td>整个项目架构</td>
                            </tr>
                            <tr>
                                <td>任务处理</td>
                                <td>需要人工逐步操作</td>
                                <td>端到端自动化</td>
                            </tr>
                            <tr>
                                <td>测试验证</td>
                                <td>需要手动运行</td>
                                <td>自动运行并修复</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="detailed-comparison">
                    <h3>Claude Code vs 对话式 AI（豆包、ChatGPT 网页版等）</h3>

                    <div class="comparison-scenario">
                        <h4>场景：修改配置文件中的某个数值</h4>

                        <div class="comparison-cards">
                            <div class="comparison-card traditional">
                                <div class="card-header">
                                    <span class="card-icon">💬</span>
                                    <h5>对话式 AI（豆包/ChatGPT）</h5>
                                </div>
                                <div class="card-content">
                                    <div class="problem-section">
                                        <h6>❌ 存在的问题</h6>
                                        <ul>
                                            <li><strong>逐行输出：</strong>只能一行一行地生成代码，无法直接操作文件</li>
                                            <li><strong>无法精确修改：</strong>不能定位到具体某一行进行修改</li>
                                            <li><strong>完整重写：</strong>即使只改一个数字，也要重新输出整个文件</li>
                                            <li><strong>需要手动复制：</strong>用户必须手动复制粘贴到编辑器</li>
                                            <li><strong>无法验证：</strong>不能运行代码验证修改是否正确</li>
                                        </ul>
                                    </div>
                                    <div class="workflow-example">
                                        <h6>工作流程</h6>
                                        <ol>
                                            <li>用户：请把 config.json 中的 port 从 3000 改为 8080</li>
                                            <li>AI：好的，这是修改后的完整文件：</li>
                                            <li>AI：逐行输出整个文件内容...</li>
                                            <li>用户：手动复制粘贴到编辑器</li>
                                            <li>用户：手动保存文件</li>
                                            <li>用户：手动运行验证</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>

                            <div class="comparison-card claude">
                                <div class="card-header">
                                    <span class="card-icon">🤖</span>
                                    <h5>Claude Code</h5>
                                </div>
                                <div class="card-content">
                                    <div class="advantage-section">
                                        <h6>✅ 强大优势</h6>
                                        <ul>
                                            <li><strong>精确编辑：</strong>直接定位到第 5 行，只修改 port 这一个值</li>
                                            <li><strong>自动保存：</strong>修改后自动保存文件，无需人工干预</li>
                                            <li><strong>智能检索：</strong>自动找到 config.json 文件位置</li>
                                            <li><strong>自动验证：</strong>可以运行程序验证配置是否生效</li>
                                            <li><strong>保留格式：</strong>保持原文件的格式、注释和结构</li>
                                        </ul>
                                    </div>
                                    <div class="workflow-example">
                                        <h6>工作流程</h6>
                                        <ol>
                                            <li>用户：请把 config.json 中的 port 从 3000 改为 8080</li>
                                            <li>Claude Code：找到 config.json</li>
                                            <li>Claude Code：定位到 "port": 3000</li>
                                            <li>Claude Code：精确替换为 "port": 8080</li>
                                            <li>Claude Code：自动保存</li>
                                            <li>Claude Code：（可选）运行验证</li>
                                            <li>✅ 完成！</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="real-example">
                        <h4>真实对比示例</h4>
                        <div class="example-tabs">
                            <div class="example-tab">
                                <div class="tab-header">豆包 / ChatGPT 网页版</div>
                                <div class="tab-content">
                                    <div class="chat-message user">
                                        <strong>你：</strong>请修改 package.json 中的版本号从 1.0.0 改为 1.1.0
                                    </div>
                                    <div class="chat-message ai">
                                        <strong>AI：</strong>好的，这是修改后的 package.json：
                                        <pre><code>{
  "name": "my-project",
  "version": "1.1.0",
  "description": "...",
  "main": "index.js",
  ...
  （输出整个文件的 50 行代码）
}</code></pre>
                                        <p class="note">❌ 问题：虽然只改了一个数字，但输出了整个文件</p>
                                    </div>
                                </div>
                            </div>

                            <div class="example-tab">
                                <div class="tab-header">Claude Code</div>
                                <div class="tab-content">
                                    <div class="chat-message user">
                                        <strong>你：</strong>请修改 package.json 中的版本号从 1.0.0 改为 1.1.0
                                    </div>
                                    <div class="chat-message claude">
                                        <strong>Claude Code：</strong>
                                        <div class="action-log">
                                            <p>🔍 找到文件：package.json</p>
                                            <p>✏️ 修改第 3 行：</p>
                                            <pre><code>-  "version": "1.0.0",
+  "version": "1.1.0",</code></pre>
                                            <p>💾 已保存文件</p>
                                            <p>✅ 完成！版本号已更新</p>
                                        </div>
                                        <p class="note">✅ 优势：精确修改，显示差异，自动保存</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Agent 概念详解 -->
            <section id="agent-concept" class="content-section">
                <h2>Agent 概念详解</h2>

                <div class="info-box">
                    <h3>什么是 AI Agent？</h3>
                    <p><strong>Agent（智能体）</strong>是一种能够感知环境、做出决策并自主执行任务的 AI 系统。与传统的"问答式" AI 不同，Agent 可以主动规划、使用工具、并持续迭代直到完成目标。</p>
                </div>

                <div class="architecture-box">
                    <h3>Claude Code 的多层 Agent 架构</h3>
                    <div class="architecture-diagram">
                        <div class="agent-layer main-agent">
                            <h4>主 Agent（Main Agent）</h4>
                            <p>负责用户交互和任务调度</p>
                        </div>
                        <div class="arrow-down">↓ 任务分解 ↓</div>
                        <div class="agent-layer sub-agents">
                            <div class="sub-agent">
                                <h4>Sub-Agent 1</h4>
                                <p>单元测试生成</p>
                            </div>
                            <div class="sub-agent">
                                <h4>Sub-Agent 2</h4>
                                <p>文档更新</p>
                            </div>
                            <div class="sub-agent">
                                <h4>Sub-Agent 3</h4>
                                <p>代码重构</p>
                            </div>
                        </div>
                        <div class="arrow-down">↓ 结果汇总 ↓</div>
                        <div class="agent-layer result">
                            <h4>返回给用户</h4>
                        </div>
                    </div>
                </div>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>任务理解</h3>
                            <p>主 Agent 接收用户命令，分析任务需求和复杂度</p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>智能决策</h3>
                            <p>简单任务：单 Agent 直接处理<br>复杂任务：创建 Sub-agents 并行处理</p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>协同执行</h3>
                            <p>各个 Sub-agent 独立工作，拥有专属的上下文和工具集</p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>结果整合</h3>
                            <p>主 Agent 收集所有 Sub-agent 的结果，汇总后返回用户</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 上下文检索机制 -->
            <section id="context-retrieval" class="content-section">
                <h2>上下文检索机制</h2>

                <div class="info-box highlight">
                    <h3>Claude Code 如何理解你的项目？</h3>
                    <p>当你向 Claude Code 发送命令时，它会自动检索相关文件和代码，构建完整的上下文信息，然后将这些信息连同你的命令一起发送给大模型。</p>
                </div>

                <div class="workflow-box">
                    <h3>上下文检索工作流程</h3>
                    <div class="workflow-steps">
                        <div class="workflow-step">
                            <div class="step-icon">📝</div>
                            <h4>1. 接收命令</h4>
                            <p>用户输入任务描述</p>
                        </div>
                        <div class="workflow-arrow">→</div>
                        <div class="workflow-step">
                            <div class="step-icon">🔍</div>
                            <h4>2. 智能检索</h4>
                            <p>搜索相关文件和代码</p>
                        </div>
                        <div class="workflow-arrow">→</div>
                        <div class="workflow-step">
                            <div class="step-icon">📦</div>
                            <h4>3. 上下文构建</h4>
                            <p>整合项目信息</p>
                        </div>
                        <div class="workflow-arrow">→</div>
                        <div class="workflow-step">
                            <div class="step-icon">🤖</div>
                            <h4>4. 发送模型</h4>
                            <p>提交给大模型处理</p>
                        </div>
                    </div>
                </div>

                <div class="memory-system">
                    <h3>分层记忆管理系统</h3>
                    <div class="memory-layers">
                        <div class="memory-layer short-term">
                            <h4>短期记忆</h4>
                            <p>当前对话的上下文</p>
                            <ul>
                                <li>最近的命令和回复</li>
                                <li>当前修改的文件</li>
                                <li>临时变量和状态</li>
                            </ul>
                        </div>
                        <div class="memory-layer mid-term">
                            <h4>中期记忆</h4>
                            <p>压缩存储的历史信息</p>
                            <ul>
                                <li>使用 AU2 算法压缩</li>
                                <li>平均压缩率 78%</li>
                                <li>上下文达到 92% 时触发</li>
                            </ul>
                        </div>
                        <div class="memory-layer long-term">
                            <h4>长期记忆</h4>
                            <p>持久化的项目知识</p>
                            <ul>
                                <li>CLAUDE.md 配置文件</li>
                                <li>常用命令和规范</li>
                                <li>项目架构文档</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <h3>💡 CLAUDE.md 配置技巧</h3>
                    <p>在项目根目录创建 <code>CLAUDE.md</code> 文件，Claude Code 启动时会自动加载其内容作为上下文。建议包含：</p>
                    <ul>
                        <li>项目架构说明和目录结构</li>
                        <li>常用命令和脚本</li>
                        <li>编码规范和风格指南</li>
                        <li>核心文件和函数说明</li>
                        <li>依赖关系和配置说明</li>
                    </ul>
                </div>
            </section>

            <!-- 转接原理 -->
            <section id="relay-principle" class="content-section">
                <h2>转接原理详解</h2>

                <div class="info-box highlight">
                    <h3>什么是"转接"？</h3>
                    <p>"转接"是指将 Claude Code 的请求从 Anthropic 官方 API 转向其他大模型服务商（如智谱 AI 的 GLM-4.6）的技术。通过转接，你可以使用兼容的国内模型，享受更快的响应速度和更低的成本。</p>
                </div>

                <div class="relay-diagram">
                    <h3>转接工作原理</h3>
                    <div class="relay-flow">
                        <div class="relay-step">
                            <h4>标准模式</h4>
                            <div class="flow-item">
                                <span class="flow-node">Claude Code</span>
                                <span class="flow-arrow">→</span>
                                <span class="flow-node">Anthropic API</span>
                                <span class="flow-arrow">→</span>
                                <span class="flow-node">Claude 模型</span>
                            </div>
                        </div>
                        <div class="relay-divider">VS</div>
                        <div class="relay-step">
                            <h4>转接模式</h4>
                            <div class="flow-item">
                                <span class="flow-node">Claude Code</span>
                                <span class="flow-arrow">→</span>
                                <span class="flow-node highlight-node">智谱 API</span>
                                <span class="flow-arrow">→</span>
                                <span class="flow-node highlight-node">GLM-4.6</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>兼容协议</h3>
                            <p>智谱 AI 提供了兼容 Anthropic API 的接口，使用相同的请求格式和响应结构</p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>修改配置</h3>
                            <p>通过修改 <code>ANTHROPIC_BASE_URL</code> 环境变量，将请求重定向到智谱 API</p>
                            <div class="code-block">
                                <pre><code>ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>模型映射</h3>
                            <p>配置模型名称映射，将 Claude 模型名替换为 GLM 模型</p>
                            <div class="code-block">
                                <pre><code>ANTHROPIC_DEFAULT_SONNET_MODEL=glm-4.6
ANTHROPIC_DEFAULT_HAIKU_MODEL=glm-4.5-air</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>透明转接</h3>
                            <p>Claude Code 无需任何代码修改，自动使用配置的 API 端点和模型</p>
                        </div>
                    </div>
                </div>

                <div class="success-box">
                    <h3>转接的优势</h3>
                    <ul>
                        <li>✅ <strong>更快的响应速度：</strong>使用国内服务器，减少网络延迟</li>
                        <li>✅ <strong>更低的成本：</strong>智谱 AI 价格更优惠</li>
                        <li>✅ <strong>中文优化：</strong>GLM-4.6 对中文有更好的理解能力</li>
                        <li>✅ <strong>无缝切换：</strong>保持完全相同的使用体验</li>
                    </ul>
                </div>
            </section>

            <!-- 工作区切换 -->
            <section id="workspace-switch" class="content-section">
                <h2>工作区切换与基础操作</h2>

                <div class="info-box">
                    <h3>什么是工作区？</h3>
                    <p>工作区（Workspace）是 Claude Code 的工作目录，包含了你要处理的项目文件。Claude Code 会在工作区内检索文件、执行命令和修改代码。</p>
                </div>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>启动 Claude Code</h3>
                            <p>在项目目录下打开终端，运行：</p>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyCode(this)">复制</button>
                                <pre><code>cd /path/to/your/project
claude</code></pre>
                            </div>
                            <p class="note">当前目录会自动成为工作区</p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>切换工作区</h3>
                            <p>使用内置命令切换到其他目录：</p>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyCode(this)">复制</button>
                                <pre><code>/cd /path/to/another/project</code></pre>
                            </div>
                            <p class="note">注意：命令以斜杠 <code>/</code> 开头</p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>查看当前工作区</h3>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyCode(this)">复制</button>
                                <pre><code>/pwd</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>列出文件</h3>
                            <div class="code-block">
                                <button class="copy-btn" onclick="copyCode(this)">复制</button>
                                <pre><code>/ls</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="command-reference">
                    <h3>常用命令速查</h3>
                    <table class="command-table">
                        <thead>
                            <tr>
                                <th>命令</th>
                                <th>说明</th>
                                <th>示例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>/help</code></td>
                                <td>查看帮助文档</td>
                                <td><code>/help</code></td>
                            </tr>
                            <tr>
                                <td><code>/clear</code></td>
                                <td>清空对话历史</td>
                                <td><code>/clear</code></td>
                            </tr>
                            <tr>
                                <td><code>/cd</code></td>
                                <td>切换工作目录</td>
                                <td><code>/cd ~/projects/myapp</code></td>
                            </tr>
                            <tr>
                                <td><code>/exit</code></td>
                                <td>退出 Claude Code</td>
                                <td><code>/exit</code></td>
                            </tr>
                            <tr>
                                <td><code>/tokens</code></td>
                                <td>查看 token 使用情况</td>
                                <td><code>/tokens</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="success-box">
                    <h3>🎉 恭喜完成第二节课！</h3>
                    <p>你已经了解了 Claude Code 的核心概念和工作原理。接下来进入高级用法学习！</p>
                </div>
            </section>

            

            <!-- 技术支持 -->
            <section class="support-section">
                <h3>需要帮助？</h3>
                <p>如果在学习过程中遇到问题，请联系技术支持。</p>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>